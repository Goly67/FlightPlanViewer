<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="https://www.iconpacks.net/icons/2/free-airplane-icon-1755-thumb.png" type="image/x-icon">
    <title>Flight Plans</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        :root {
            --primary-color: #3498db;
            --secondary-color: #2c3e50;
            --accent-color: #e74c3c;
            --background-color: #ecf0f1;
            --text-color: #34495e;
            --button-color: #4CAF50;
            /* Green */
            --button-hover-color: #3e8e41;
            /* Darker green */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            background-image: url('https://images.unsplash.com/photo-1436491865332-7a61a109cc05?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1474&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            margin: 0;
            padding: 2rem;
            min-height: 100vh;
            zoom: 0.6;
            /* Zoom out the entire page */
        }

        .container {
            background-color: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: 0 auto;
            backdrop-filter: blur(10px);
        }

        h1,
        h2 {
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        h1 {
            font-size: 2.5rem;

        }

        h2 {
            font-size: 2rem;
            margin-top: -1rem;
        }

        .flight-plan {
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .flight-plan:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }

        .flight-plan h3 {
            color: var(--secondary-color);
            margin-top: -1%;
            margin-bottom: 1rem;
            font-size: 1.8rem;
            font-weight: 600;
            text-align: center;

        }

        .flight-plan p {
            margin: 0.5rem 0;
            color: var(--text-color);
            font-size: 130%;
        }

        .no-plans,
        .no-notes {
            text-align: center;
            color: var(--text-color);
            font-style: italic;
            font-size: 1.2rem;
            margin-top: -0.5rem;
        }

        .notes-section {
            margin-top: 2rem;
            border-top: 2px solid var(--primary-color);
            padding-top: 2rem;
        }

        .notes-list {
            list-style-type: none;
            padding: 0;
        }

        .note-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.8);
            border-left: 5px solid var(--primary-color);
            border-radius: 5px;
            padding: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .note-item:hover {
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .delete-note {
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 3px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.9rem;
        }

        .delete-note:hover {
            background-color: #c0392b;
        }

        .add-note {
            display: flex;
            margin-top: 1rem;
        }

        .add-note input {
            flex-grow: 1;
            padding: 0.75rem;
            border: 2px solid var(--primary-color);
            border-radius: 5px 0 0 5px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
        }

        .add-note button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 0 5px 5px 0;
            padding: 0.75rem 1.5rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            font-weight: 600;
        }

        .add-note button:hover {
            background-color: #2980b9;
        }

        .add-note input:focus {
            background-color: white;
            /* Change background color */
            /* Make border bigger and keep primary color */
            outline: none;
            /* Remove default outline */
        }

        .copy-button {
            background-color: var(--button-color);
            /* Green */
            border: none;
            color: white;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .copy-button:hover {
            background-color: var(--button-hover-color);
            /* Darker green */
        }

        .atis-section {
            margin-top: 2rem;
            border-top: 2px solid var(--primary-color);
            padding-top: 2rem;
        }

        .atis-example {
            background-color: rgba(255, 255, 255, 0.8);
            border: 2px solid var(--primary-color);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            display: flex;
            /* Enable flexbox for horizontal alignment */
            justify-content: space-between;
            /* Distribute space between elements */
            align-items: center;
            /* Vertically align items */
        }

        .copy-button {
            background-color: var(--button-color);
            /* Green */
            border: none;
            color: white;
            padding: 8px 16px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 0;
            /* Remove default margins */
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        .copy-button:hover {
            background-color: var(--button-hover-color);
            /* Darker green */
        }

        .atis-example p {
            margin: 0.5rem 0;
            color: var(--text-color);
            margin-right: 10px;
            /* Add some spacing between the paragraph and the button */
        }

        .atis-example:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-5px);
        }


        .back-button {
            display: block;
            margin: 2rem auto;
            padding: 1rem 2rem;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 5px;
            text-align: center;
            text-decoration: none;
            font-size: 1rem;
            font-weight: 600;
            transition: background-color 0.3s ease;
        }

        .back-button:hover {
            background-color: #2980b9;
            /* Darker blue */
        }

        /* Style for Edit Input */
        #editNote {
            padding: 0.75rem;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
        }

        /* Style for the Edit Container */
        .edit-container {
            display: none;
            /* Hide initially */
            align-items: center;
        }

        .edit-container input {
            flex-grow: 1;
            padding: 0.75rem;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            font-size: 1rem;
            width: 32.5rem;
            border: 2px solid black;
            /* Default border color */
            border-radius: 10px;
            outline: none;
            /* Remove default outline */
            border-color: var(--primary-color);
            /* Change border color to red on focus */
        }

        input:focus,
        select:focus {
            outline: none;
            border-color: var(--accent-color);
            /* Red border */
            box-shadow: 0 0 0 4px rgba(231, 76, 60, 0.3);
            background-color: white;
        }

        .edit-note,
        .update-note,
        .cancel-edit {
            background-color: var(--button-color);
            /* Green */
            color: white;
            border: none;
            border-radius: 3px;
            padding: 0.5rem 1rem;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.9rem;
            margin-left: 10px;
            /* Add some spacing between buttons */
        }

        .edit-note:hover,
        .update-note:hover,
        .cancel-edit:hover {
            background-color: var(--button-hover-color);
            /* Darker green */
        }


        @media (max-width: 600px) {
            body {
                padding: 1rem;
                zoom: 0.6;
                /* Zoom out the entire page */
            }

            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }

            h2 {
                font-size: 1.5rem;
            }

            .flight-plan h3 {
                font-size: 1.2rem;
            }

            .add-note {
                flex-direction: column;
            }

            .add-note input,
            .add-note button {
                width: 100%;
                border-radius: 5px;
            }

            .add-note button {
                margin-top: 0.5rem;
            }
        }

        .frequencies-section {
            /* Space above frequencies section */
            padding: 10px;
            background-color: #f0f8ff;
            /* Light blue background for contrast */
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-top: 1.8rem;
            border-top: 12px solid var(--primary-color);
            padding-top: 2rem;
        }

        .frequencies-section h3 {
            margin-bottom: 10px;
            /* Space below the title */
            font-size: 1.3rem;
        }

        #frequencyDropdown {
            width: 100%;
            /* Full width for the dropdown */
            padding: 10px;
            border: 2px solid var(--primary-color);
            border-radius: 5px;
            background-color: white;
            /* White background for the dropdown */
            display: grid;
            gap: 0.8rem;
            /* Reduced gap */
            font-size: 1.7rem;
        }

        #frequencyDisplay {
            font-weight: bold;
            /* Bold text for frequency display */
            color: #333;
            /* Darker color for visibility */
            font-size: 1.3rem;
        }

        .zoom-button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1.6rem;
            cursor: pointer;
            margin-right: 10px;
            transition: background-color 0.3s, transform 0.2s;
        }

        /* Hover effect */
        .zoom-button:hover {
            background-color: #0056b3;
            /* Darker blue on hover */
            transform: scale(1.05);
            /* Slightly grow the button */
        }

        /* Ensure buttons stack nicely */
        .button-container {
            margin-top: 15px;
            text-align: center;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Flight Plans</h1>
        <div id="flightPlansList"></div>
        <a href="https://goly67.github.io/FlightPlanner/" class="back-button">Back to Flight Planner</a>
        <div class="notes-section">
            <h2>Notes</h2>
            <div id="notesList"></div>
            <div class="add-note">
                <input type="text" id="newNote" placeholder="Add a new note" maxlength="150">
                <button onclick="addNote()">Add Note</button>
            </div>
        </div>
        <div class="frequencies-section">
            <h3 style="margin-top: -1.5rem;">Select Airport Frequency</h3>
            <select id="frequencyDropdown" onchange="displayFrequency()">
                <option value="" disabled selected>Select an airport</option>
                <option value="UNICOM - 122.800">Unicom - 122.800</option>
                <option value="GCLP_APP - 121.300">Gran Canaria (GCLP) - APP: 121.300</option>
                <option value="LEMH_TWR - 121.750">Menorca (LEMH) - TWR: 121.750</option>
                <option value="LYTV_TWR - 119.325">Tivat (LYTV) - TWR: 119.325</option>
                <option value="EGKK_APP - 126.825">London Gatwick (EGKK) - APP: 126.825</option>
                <option value="MDPC_APP - 119.850">Punta Cana (MDPC) - APP: 119.850</option>
                <option value="MDST_TWR - 118.300">Cibao (MDST) - TWR: 118.300</option>
            </select>
            <p id="frequencyDisplay" style="margin-top: 10px; text-align: center; font-size: 2rem;"></p>
        </div>
        <div class="atis-section">
            <h2>Ground Movement Chart</h2>
            <label for="groundChartSelector"
                style="display: block; text-align: center; margin-top: -1rem; margin-bottom: 1rem; font-size: 1.3rem;">Choose
                Ground Movement Chart Image:</label>
            <select id="groundChartSelector" onchange="updateGroundChart()"
                style="font-size: 1.7rem; width: 100%; padding: 0.75rem; border: 2px solid var(--primary-color); border-radius: 5px; margin-bottom: -1.3rem;">
                <option
                    value="https://lh5.googleusercontent.com/mJ2MGUrgYV1KxivSu7M7BWnwme7ffr21DhZkh6YnIzo0g8WOtDp_4gBtJqmKclBT6OQI7Iy9-k-rVOa4hJNf7mKLlB0nr3VBz9hu-ntK2HQAj5Il8FCIQg-RupCeQ-67nA">
                    <h2>GCLP - GRAN CANARIA</h2>
                </option>
                <option
                    value="https://lh6.googleusercontent.com/3yOmKryoISuUb2AiJoyx8Q0LUkHXzIeXaITai9S-KONAMphWPrUjyRbiexsEQz3BUtHsVeTViAhJ0BokD8P6DVCRZ67xkZoGnGbTRkxQ_NOubDuUVXwPzbgSGuBXPMXgTQ=w740">
                    <h2>LEMH - MENORCA</h2>
                </option>
                <option
                    value="https://lh5.googleusercontent.com/vmbCHfImd6Qv4qpOwJu2fTZ39NTLkNN2rVocTroq50cwZAszqTjxQOMpTXyGJuH5dwHk_tbm9mpOjSrmtoFUWHa4T7u_Zw81A37dMYBd_7rVL92divF1QyOc2sSOBLtSeg=w740">
                    <h2>EFKT - KITTILA</h2>
                </option>
                <option
                    value="https://lh3.googleusercontent.com/C2_fk7YcIxDezR9Zw9yGy_vXcqPcPiHWYtx90faKte0w7st9jZxpYMGtBxEBCnKq7ZoPI--8WR7mGCRfFmvfbko_UyT54RnfKtyIaTiJgoCBD_VhzLbiwCvrRodCvqoc1A=w740">
                    <h2>MDPC - PUNTA CANA</h2>
                </option>
                <option
                    value="https://lh3.googleusercontent.com/_5Qb6sW5aaKnA-wVCTIFQZ5398vrvExx3q9EjNHnwcOQ7BT94_1oqaIUKuqbDhZQekzBMWiVCRlIiJBbEuygrS5T-fjHnQNj1bPZYj41QBaMQQAfB-zOVwAXCkJENY7pLA=w740">
                    <h2>MDST - CIBAO</h2>
                </option>
                <option
                    value="https://lh5.googleusercontent.com/unwUO92__aQ8C7GF8NqYfXAYWhJ_VEhHeaD9UT21xEwEarOfElU36XF-VJaX9e7cArZ65XMMt4w_okG67lb6jlM0-5A2Ky85-ylLd3_j6KYtS--VMRStUTMis0hH4LI3hA=w740">
                    <h2>EGKK - GATWICK</h2>
                </option>
            </select>
            <div id="image-container"
                style="width: 100%; height: 460px; overflow: hidden; margin: 2em auto; position: relative; border: 1px solid #ccc; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); border-radius: 10px;">
                <img id="groundChartImage"
                    src="https://lh5.googleusercontent.com/mJ2MGUrgYV1KxivSu7M7BWnwme7ffr21DhZkh6YnIzo0g8WOtDp_4gBtJqmKclBT6OQI7Iy9-k-rVOa4hJNf7mKLlB0nr3VBz9hu-ntK2HQAj5Il8FCIQg-RupCeQ-67nA"
                    alt="Ground Movement Chart"
                    style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(1);">
            </div>

            <!-- Zoom buttons -->
            <div class="button-container">
                <button onclick="zoomIn()" class="zoom-button">Zoom In</button>
                <button onclick="zoomOut()" class="zoom-button">Zoom Out</button>
            </div>
        </div>


        <div class="atis-section">
            <h2>Project flight Server</h2>
            <div class="atis-example">
                <p>31xxRy8Zpy</p>
                <button class="copy-button" onclick="copyServer()">Copy</button>
            </div>
            <div class="atis-example">
                <p>PUBLICATC</p>
                <button class="copy-button" onclick="copyPassword()">Copy</button>
            </div>
            <div class="atis-section">
                <h2>ATIS Example</h2>
                <div class="atis-example">
                    <p>
                        Gran Canaria (GCLP)
                        <br />
                        <br />
                        GCLP_APP [121.300]: @xaie9
                        <br />
                        <br />
                        [**[CLICK HERE TO FILL UP FLIGHT PLAN]**](https://forms.gle/WfpsCb9wpCvrbcSc6)
                        <br />
                        <br />
                        GRAN CANARIA AIRPORT INFORMATION Q... 1100Z... WIND 080 AT 5 KNOTS, VARIABLE BETWEEN 040 AND 110
                        DEGREES... VISIBILITY 10 OR MORE KILOMETERS... FEW CLOUDS AT 3000... TEMPERATURE 26, DEWPOINT
                        22... QNH 1018, ALTIMETER 3006... VISUAL APPROACHES IN USE... LANDING RUNWAY 03L... DEPARTING
                        RUNWAY 21L... ADVISE CONTROLLER ON INITIAL CONTACT THAT YOU HAVE INFORMATION Q...
                        <br />
                        <br />
                        <b style="font-size: 140%;">IMPORTANT:</b> <em><b><br />"DEP NORTHEAST, ARR SOUTHWEST RUNWAY"
                                WRONG. <br />"DEP SOUTHWEST, ARR SOUTHWEST" CORRECT.</em></b>
                    </p>
                    <button class="copy-button" onclick="copyAtis()">Copy</button>
                </div>
            </div>
        </div>
        <script>
            let zoomLevel = 1; // Initial zoom level
            let isDragging = false; // For tracking drag status
            let currentX = 0, currentY = 0; // Track current image position
            let initialMouseX, initialMouseY; // Initial mouse position

            const image = document.getElementById('groundChartImage');
            const container = document.getElementById('image-container');

            // Disable default drag behavior of the image
            image.addEventListener('dragstart', (event) => {
                event.preventDefault();
            });

            // Pointer down to start dragging
            image.addEventListener('pointerdown', (event) => {
                if (zoomLevel > 1) {
                    isDragging = true;
                    image.setPointerCapture(event.pointerId); // Capture pointer events for this element
                    image.style.cursor = 'grabbing';

                    initialMouseX = event.clientX;
                    initialMouseY = event.clientY;

                    // Prevent text selection while dragging
                    document.body.style.userSelect = 'none';
                }
            });

            // Pointer up to stop dragging
            image.addEventListener('pointerup', () => {
                isDragging = false;
                image.style.cursor = 'grab';
                // Re-enable text selection
                document.body.style.userSelect = '';
            });

            // Pointer move to handle dragging
            image.addEventListener('pointermove', (event) => {
                if (isDragging) {
                    const dx = event.clientX - initialMouseX;
                    const dy = event.clientY - initialMouseY;

                    // Update current position directly
                    currentX += dx;
                    currentY += dy;

                    // Update image position
                    image.style.transform = `translate(${currentX}px, ${currentY}px) scale(${zoomLevel})`;

                    // Update initial mouse position
                    initialMouseX = event.clientX;
                    initialMouseY = event.clientY;
                }
            });

            // Function to zoom in
            function zoomIn() {
                zoomLevel = Math.min(zoomLevel + 0.2, 3); // Cap zoom level to 3
                updateImageTransform();
            }

            // Function to zoom out
            function zoomOut() {
                zoomLevel = Math.max(zoomLevel - 0.2, 1); // Minimum zoom level of 1
                updateImageTransform();
            }

            // Update image transform based on zoom
            function updateImageTransform() {
                if (zoomLevel === 1) {
                    // Reset offsets when zooming out to original size
                    currentX = 0;
                    currentY = 0;
                    image.style.transform = 'translate(-50%, -50%) scale(1)';
                } else {
                    image.style.transform = `translate(${currentX}px, ${currentY}px) scale(${zoomLevel})`;
                }
            }

            // Function to handle changing the image
            function updateGroundChart() {
                const selector = document.getElementById('groundChartSelector');
                const selectedValue = selector.value;

                // Update image source
                image.src = selectedValue;

                // Reset zoom level and transform to center
                zoomLevel = 1;
                currentX = 0;
                currentY = 0;
                image.style.transform = 'translate(-50%, -50%) scale(1)';
            }


            function displayFrequency() {
                const dropdown = document.getElementById('frequencyDropdown');
                const selectedFrequency = dropdown.value; // Get selected frequency
                const displayElement = document.getElementById('frequencyDisplay'); // Get the display element

                console.log("Selected Frequency:", selectedFrequency); // Debugging log

                if (selectedFrequency) {
                    displayElement.textContent = `${selectedFrequency}`; // Display selected frequency
                    localStorage.setItem('selectedFrequency', selectedFrequency); // Save to localStorage
                } else {
                    displayElement.textContent = ''; // Clear if nothing selected
                }
            }

            window.onload = function () {
                // Check if there's a saved selection in localStorage
                const savedFrequency = localStorage.getItem('selectedFrequency');
                console.log("Saved Frequency from localStorage:", savedFrequency); // Debugging log

                if (savedFrequency) {
                    const dropdown = document.getElementById('frequencyDropdown');
                    dropdown.value = savedFrequency; // Set the dropdown to the saved value
                    displayFrequency(); // Display the saved frequency
                }
            };

            function updateGroundChart() {
                const selector = document.getElementById('groundChartSelector');
                const image = document.getElementById('groundChartImage');
                const selectedValue = selector.value;

                // Update the image source based on the selected option
                image.src = selectedValue;

                // Save the selected option to localStorage
                localStorage.setItem('selectedGroundChart', selectedValue);
            }

            window.onload = function () {
                // Check if there's a saved selection in localStorage
                const savedValue = localStorage.getItem('selectedGroundChart');
                if (savedValue) {
                    const selector = document.getElementById('groundChartSelector');
                    selector.value = savedValue; // Set the selector to the saved value
                    updateGroundChart(); // Update the image based on the saved value
                }
            };


            function displayFlightPlans() {
                const flightPlansList = document.getElementById('flightPlansList');
                const flightPlans = JSON.parse(localStorage.getItem('flightPlans')) || [];
                if (flightPlans.length === 0) {
                    flightPlansList.innerHTML = '<p class="no-plans">No flight plans submitted yet.</p>';
                    return;
                }
                flightPlansList.innerHTML = flightPlans.map(plan => `
        <div class="flight-plan">
            <h3>${plan.callsign} - ${plan.departure} to ${plan.arrival}</h3>
            <p><strong>Aircraft:</strong> ${plan.aircraft}</p>
            <p><strong>Flight Rule Type:</strong> ${plan.flightRule}</p>
            <p><strong>SID:</strong> ${plan.sid}</p>
            <p><strong>Cruising Level:</strong> ${plan.cruisingLevel}</p>
            <p><strong>Squawk:</strong> ${plan.squawk || 'Not assigned'}</p>
        </div>
    `).join('');
            }

            function displayNotes() {
                const notesList = document.getElementById('notesList');
                const notes = JSON.parse(localStorage.getItem('notes')) || [];

                if (notes.length === 0) {
                    notesList.innerHTML = '<p class="no-notes">No notes added yet.</p>';
                    return;
                }

                notesList.innerHTML = `
        <ul class="notes-list">
            ${notes.map((note, index) => `
                <li class="note-item">
                    <span class="note-text">${note}</span> 
                    <button class="edit-note" onclick="editNote(${index})">Edit</button>
                    <button class="delete-note" onclick="deleteNote(${index})">Delete</button>
                    <div class="edit-container" style="display: none;"> 
                        <input type="text" id="editNote-${index}" value="${note}">
                        <button class="update-note" onclick="updateNote(${index})">Update</button>
                        <button class="cancel-edit" onclick="cancelEdit(${index})">Cancel</button>
                    </div>
                </li>
            `).join('')}
        </ul>
    `;
            }

            function addNote() {
                const newNoteInput = document.getElementById('newNote');
                const noteText = newNoteInput.value.trim();

                if (noteText) {
                    const notes = JSON.parse(localStorage.getItem('notes')) || [];
                    notes.push(noteText);
                    localStorage.setItem('notes', JSON.stringify(notes));
                    newNoteInput.value = '';
                    displayNotes();
                }
            }

            document.getElementById('newNote').addEventListener('keyup', function (event) {
                if (event.key === 'Enter') {
                    addNote(); // Call the addNote function when Enter is pressed
                }
            });

            document.addEventListener('keyup', function (event) {
                if (event.key === 'Enter') {
                    const editInputs = document.querySelectorAll('.edit-container input');
                    editInputs.forEach((input, index) => {
                        if (input === event.target) {
                            updateNote(index);
                        }
                    });
                }
            });

            function deleteNote(index) {
                const notes = JSON.parse(localStorage.getItem('notes')) || [];

                notes.splice(index, 1);
                localStorage.setItem('notes', JSON.stringify(notes));

                displayNotes(); // Call displayNotes after deletion to refresh the UI
            }

            function updateNote(index) {
                const notes = JSON.parse(localStorage.getItem('notes')) || [];
                const noteItem = document.querySelectorAll('.note-item')[index];
                const originalNote = noteItem.querySelector('.note-text').textContent.trim(); // Get the original note text

                notes[index] = originalNote; // Update the note in localStorage with the original text
                localStorage.setItem('notes', JSON.stringify(notes));

                cancelEdit(index); // Hide the edit input and show the updated text
            }

            function editNote(index) {
                const noteItem = document.querySelectorAll('.note-item')[index];
                const noteText = noteItem.querySelector('.note-text');
                const editContainer = noteItem.querySelector('.edit-container');
                const editInput = noteItem.querySelector(`#editNote-${index}`); // Get the edit input field
                const editButton = noteItem.querySelector('.edit-note');
                const deleteButton = noteItem.querySelector('.delete-note');

                // Toggle visibility of elements
                noteText.style.display = 'none';
                editContainer.style.display = 'flex';

                // Hide the Edit and Delete buttons while editing
                editButton.style.display = 'none';
                deleteButton.style.display = 'none';

                // Focus the edit input
                editInput.focus();
                editInput.setSelectionRange(editInput.value.length, editInput.value.length); // Set cursor at the end
            }

            function updateNote(index) {
                const notes = JSON.parse(localStorage.getItem('notes')) || [];
                const noteItem = document.querySelectorAll('.note-item')[index];
                const updatedNote = noteItem.querySelector(`#editNote-${index}`).value.trim(); // Get the updated note text

                if (updatedNote === "") {
                    // If the updated note is empty, delete it
                    deleteNote(index);
                } else {
                    // Update the note in localStorage
                    notes[index] = updatedNote;
                    localStorage.setItem('notes', JSON.stringify(notes));

                    // Update the UI with the new note text
                    const noteText = noteItem.querySelector('.note-text');
                    noteText.textContent = updatedNote;

                    // Hide the edit input and show the updated note
                    cancelEdit(index);  // Call cancelEdit to hide the input and show the updated text
                }
            }

            function cancelEdit(index) {
                const noteItem = document.querySelectorAll('.note-item')[index];
                const noteText = noteItem.querySelector('.note-text');
                const editContainer = noteItem.querySelector('.edit-container');
                const editButton = noteItem.querySelector('.edit-note');
                const deleteButton = noteItem.querySelector('.delete-note');

                // Restore visibility of the note text and hide the input field
                noteText.style.display = 'block';
                editContainer.style.display = 'none';

                // Show the Edit and Delete buttons again
                editButton.style.display = 'inline-block';
                deleteButton.style.display = 'inline-block';
            }


            function cancelEdit(index) {
                const noteItem = document.querySelectorAll('.note-item')[index];
                const noteText = noteItem.querySelector('.note-text');
                const editContainer = noteItem.querySelector('.edit-container');
                const editButton = noteItem.querySelector('.edit-note');
                const deleteButton = noteItem.querySelector('.delete-note');

                noteText.style.display = 'block';
                editContainer.style.display = 'none';

                editButton.style.display = 'block';
                deleteButton.style.display = 'block';
            }

            function copyServer() {
                const textToCopy = '31xxRy8Zpy'; // Server code to copy
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert('Server code copied to clipboard: ' + textToCopy);
                });
            }

            function copyPassword() {
                const textToCopy = 'PUBLICATC'; // Password to copy
                navigator.clipboard.writeText(textToCopy).then(() => {
                    alert('Password copied to clipboard: ' + textToCopy);
                });
            }

            function copyAtis() {
                const atisText = `Gran Canaria (GCLP)\n\nGCLP_APP [121.300]: @xaie9\n\n[**[CLICK HERE TO FILL UP FLIGHT PLAN]**](https://forms.gle/WfpsCb9wpCvrbcSc6)\n\n`;
                navigator.clipboard.writeText(atisText).then(() => {
                    alert('ATIS copied to clipboard.');
                });
            }

            // Function to save flight plan with a timestamp
            function saveFlightPlan(flightPlan) {
                const flightPlans = JSON.parse(localStorage.getItem('flightPlans')) || [];
                const timestamp = Date.now(); // Get the current time

                flightPlan.timestamp = timestamp; // Add timestamp to the flight plan
                flightPlans.push(flightPlan);
                localStorage.setItem('flightPlans', JSON.stringify(flightPlans));

                // Automatically remove the flight plan after 25 minutes (1500000 milliseconds)
                setTimeout(() => {
                    deleteExpiredFlightPlans();
                    displayFlightPlans();
                }, 1500000); // 25 minutes

                displayFlightPlans(); // Refresh UI
            }

            // Function to delete expired flight plans
            function deleteExpiredFlightPlans() {
                const flightPlans = JSON.parse(localStorage.getItem('flightPlans')) || [];
                const currentTime = Date.now();

                // Keep flight plans that were added within the last 25 minutes
                const validFlightPlans = flightPlans.filter(plan => (currentTime - plan.timestamp) < 1500000);

                localStorage.setItem('flightPlans', JSON.stringify(validFlightPlans));
            }

            // Check and delete expired flight plans on page load
            window.onload = function () {
                deleteExpiredFlightPlans(); // Remove expired flight plans when page loads
            };

            // Initial display
            displayFlightPlans();
            displayNotes();
        </script>
</body>

</html>
